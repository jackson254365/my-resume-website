import React, { useState, useEffect } from 'react';
import { Github, Linkedin, Mail, MapPin, Code, Database, Cpu, Terminal, ExternalLink, Menu, X, ChevronDown } from 'lucide-react';

export default function Portfolio() {
  const [activeSection, setActiveSection] = useState('home');
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isScrolled, setIsScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const scrollToSection = (id) => {
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
      setIsMenuOpen(false);
    }
  };

  const skills = {
    languages: ['Python', 'JavaScript', 'C', 'C++'],
    frontend: ['HTML5', 'CSS3', 'React.js', 'JavaScript (ES6+)'],
    backend: ['Node.js', 'Django', 'Express.js', 'Flask'],
    databases: ['MySQL', 'PostgreSQL', 'MongoDB', 'SQLite'],
    aiData: ['OpenCV', 'TensorFlow', 'NumPy', 'Pandas', 'Scikit-learn'],
    tools: ['Git/GitHub', 'Docker', 'Linux', 'REST APIs', 'VS Code']
  };

  const projects = [
    {
      title: 'Face Recognition & OSINT Tool',
      tech: 'Python, OpenCV, Web Scraping',
      description: 'Ethical hacking tool that scans faces via camera feeds and performs web-based OSINT lookups with automated identity matching.',
      features: [
        'Real-time face detection from multiple sources',
        'Integrated Yandex Image Search',
        'GUI with match previews',
        'Professional Windows executable'
      ]
    },
    {
      title: 'POS Software - Lydian Enterprise',
      tech: 'Python, SQLite, Tkinter',
      description: 'Full-scale Windows POS desktop application with comprehensive business management features.',
      features: [
        'Inventory management system',
        'Barcode scanning & receipt printing',
        'Analytics and reporting dashboard',
        'Role-based access controls'
      ]
    },
    {
      title: 'Betting System Platform',
      tech: 'Python, JavaScript, APIs',
      description: 'Automated betting application with sophisticated odds tracking and real-time data processing.',
      features: [
        'User account management',
        'Odds tracking algorithms',
        'External API integrations',
        'Results validation system'
      ]
    }
  ];

  return (
    <div className="relative min-h-screen bg-black text-white overflow-hidden">
      {/* Decorative floating blobs and subtle background */}
      <div className="absolute inset-0 -z-20">
        <div className="absolute -left-40 -top-32 w-96 h-96 rounded-full opacity-40 blur-3xl animate-blob" style={{background: 'radial-gradient(circle at 30% 30%, rgba(99,102,241,0.35), rgba(79,70,229,0.18))'}} />
        <div className="absolute right-[-8rem] top-[-6rem] w-80 h-80 rounded-full opacity-30 blur-2xl animate-blob animation-delay-2000" style={{background: 'radial-gradient(circle at 70% 70%, rgba(16,185,129,0.28), rgba(6,95,70,0.12))'}} />
        <div className="absolute left-1/3 bottom-[-6rem] w-72 h-72 rounded-full opacity-25 blur-2xl animate-blob animation-delay-4000" style={{background: 'radial-gradient(circle at 50% 50%, rgba(234,88,12,0.18), rgba(195,64,12,0.08))'}} />
      </div>

      {/* Glass overlay that holds the content */}
      <div className="relative z-10 min-h-screen" style={{backgroundImage: 'radial-gradient(circle at 20% 50%, rgba(255,255,255,0.015) 0%, transparent 30%), radial-gradient(circle at 80% 80%, rgba(255,255,255,0.01) 0%, transparent 30%)'}}>
        <nav className={`fixed top-6 left-1/2 transform -translate-x-1/2 w-[92%] max-w-7xl z-50 transition-all duration-300 ${isScrolled ? 'bg-white/6 backdrop-blur-lg border border-white/10 shadow-lg' : 'bg-white/4 backdrop-blur-md border border-white/6'}`}>
          <div className="px-4 sm:px-6 lg:px-8">
            <div className="flex items-center justify-between h-16">
              <div className="text-xl font-bold text-white/90 border border-white/10 px-3 py-1 rounded-lg backdrop-blur-sm bg-white/3">JM</div>

              <div className="hidden md:flex space-x-8">
                {['Home', 'About', 'Skills', 'Experience', 'Projects', 'Contact'].map((item) => (
                  <button
                    key={item}
                    onClick={() => scrollToSection(item.toLowerCase())}
                    className="hover:text-gray-200 text-sm transition-colors duration-200 px-3 py-1 rounded-md"
                  >
                    {item}
                  </button>
                ))}
              </div>

              <button 
                onClick={() => setIsMenuOpen(!isMenuOpen)}
                className="md:hidden text-white/90 p-2 rounded-md backdrop-blur-sm bg-white/3 border border-white/6"
                aria-label="Toggle menu"
              >
                {isMenuOpen ? <X /> : <Menu />}
              </button>
            </div>
          </div>

          {isMenuOpen && (
            <div className="md:hidden bg-white/6 backdrop-blur-sm border-t border-white/6">
              <div className="px-2 pt-2 pb-3 space-y-1">
                {['Home', 'About', 'Skills', 'Experience', 'Projects', 'Contact'].map((item) => (
                  <button
                    key={item}
                    onClick={() => scrollToSection(item.toLowerCase())}
                    className="block w-full text-left px-3 py-2 hover:bg-white/4 rounded"
                  >
                    {item}
                  </button>
                ))}
              </div>
            </div>
          )}
        </nav>

        {/* Hero Section (glass card centered) */}
        <section id="home" className="min-h-screen flex items-center justify-center px-4 pt-24">
          <div className="relative z-20 max-w-4xl mx-auto w-full">
            <div className="mx-auto backdrop-blur-xl bg-gradient-to-r from-white/6 via-white/3 to-white/4 border border-white/8 rounded-2xl p-10 shadow-2xl">
              <div className="flex flex-col items-center text-center">
                <div className="mb-6 animate-fade-in">
                  <div className="w-32 h-32 mx-auto mb-6 rounded-full bg-gradient-to-br from-gray-700 via-gray-800 to-black border-2 border-white/10 flex items-center justify-center text-4xl font-bold shadow-lg backdrop-blur-sm bg-white/2">
                    JM
                  </div>
                </div>

                <h1 className="text-4xl md:text-6xl font-bold mb-2 text-white">Jackson Maina</h1>
                <h2 className="text-xl md:text-2xl text-gray-200 mb-4">Full-Stack Developer | AI & Software Engineer</h2>
                <p className="text-lg text-gray-300 mb-6 max-w-2xl mx-auto">Building scalable, innovative solutions with modern technologies and AI</p>

                <div className="flex flex-wrap justify-center gap-4 mb-6">
                  <a href="https://github.com/jackson254365" target="_blank" rel="noopener noreferrer" 
                     className="flex items-center gap-2 px-6 py-3 bg-white/6 hover:bg-white/8 border border-white/8 rounded-lg transition-all duration-200 backdrop-blur-sm">
                    <Github size={18} /> GitHub
                  </a>
                  <a href="https://linkedin.com/in/jackson-maina-0731022b4" target="_blank" rel="noopener noreferrer"
                     className="flex items-center gap-2 px-6 py-3 bg-white/6 hover:bg-white/8 border border-white/8 rounded-lg transition-all duration-200 backdrop-blur-sm">
                    <Linkedin size={18} /> LinkedIn
                  </a>
                  <a href="mailto:mainajackson3560@gmail.com"
                     className="flex items-center gap-2 px-6 py-3 bg-white text-black hover:bg-gray-200 rounded-lg transition-all duration-200 font-semibold">
                    <Mail size={18} /> Contact
                  </a>
                </div>

                <button onClick={() => scrollToSection('about')} className="animate-bounce text-gray-200 hover:text-white transition-colors">
                  <ChevronDown size={28} />
                </button>
              </div>
            </div>

            {/* floating content cards around hero (positioned absolutely) */}
            <div className="pointer-events-none">
              <div className="absolute -right-8 top-16 w-48 p-4 rounded-xl border border-white/8 backdrop-blur-lg bg-white/4 shadow-lg transform translate-y-0 animate-float-slow">
                <p className="text-sm text-gray-200 font-semibold">Open to work</p>
                <p className="text-xs text-gray-300">Freelance & Full-time</p>
              </div>

              <div className="absolute left-6 top-56 w-44 p-3 rounded-xl border border-white/8 backdrop-blur-lg bg-white/4 shadow-lg animate-float">
                <p className="text-sm text-gray-200 font-semibold">Machine Learning</p>
                <p className="text-xs text-gray-300">OpenCV • TensorFlow</p>
              </div>

              <div className="absolute left-1/2 -translate-x-1/2 bottom-12 w-52 p-3 rounded-xl border border-white/8 backdrop-blur-lg bg-white/4 shadow-lg animate-float-reverse">
                <p className="text-sm text-gray-200 font-semibold">POS • Inventory</p>
                <p className="text-xs text-gray-300">Lydian Enterprise</p>
              </div>
            </div>
          </div>
        </section>

        {/* About Section (glass card) */}
        <section id="about" className="py-20 px-4">
          <div className="max-w-4xl mx-auto">
            <h2 className="text-3xl md:text-4xl font-bold mb-6 text-center text-white">About Me</h2>
            <div className="mx-auto backdrop-blur-xl bg-white/6 rounded-xl p-8 border border-white/8 shadow-2xl">
              <div className="flex items-start gap-3 mb-4">
                <MapPin className="text-gray-200 flex-shrink-0 mt-1" size={18} />
                <span className="text-gray-200">Nairobi, Kenya</span>
              </div>
              <p className="text-lg text-gray-200 leading-relaxed">I am an innovative and detail-oriented Full-Stack Developer with a strong background in AI, machine learning, and modern web development. Skilled in building scalable, secure, and user-focused applications across frontend and backend stacks. Experienced with Python, JavaScript, React, Node.js, and databases, as well as implementing AI solutions such as face recognition and OSINT tools. Passionate about solving complex problems through technology and contributing to impactful projects.</p>
            </div>
          </div>
        </section>

        {/* The rest of the sections keep the glass-card style to maintain visual coherence */}
        <section id="skills" className="py-20 px-4 bg-transparent">
          <div className="max-w-6xl mx-auto">
            <h2 className="text-3xl md:text-4xl font-bold mb-8 text-center text-white">Technical Skills</h2>
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
              {['Languages','Frontend','Backend','Databases','AI & Data Science','Tools & Platforms'].map((title, i) => (
                <div key={i} className="bg-white/4 rounded-xl p-6 border border-white/8 hover:border-white/12 transition duration-300 shadow-lg backdrop-blur-md">
                  <h3 className="text-xl font-semibold text-white mb-3">{title}</h3>
                  <div className="flex flex-wrap gap-2">
                    {Object.values(skills).flat()[0] && Object.values(skills)[i] ? Object.values(skills)[i].map((skill) => (
                      <span key={skill} className="px-3 py-1 bg-white/6 rounded-full text-sm text-gray-200 border border-white/6">{skill}</span>
                    )) : null}
                  </div>
                </div>
              ))}
            </div>
          </div>
        </section>

        <section id="experience" className="py-20 px-4">
          <div className="max-w-4xl mx-auto">
            <h2 className="text-3xl md:text-4xl font-bold mb-8 text-center text-white">Professional Experience</h2>
            <div className="mx-auto backdrop-blur-xl bg-white/6 rounded-xl p-8 border border-white/8 shadow-2xl">
              <div className="flex flex-col md:flex-row md:items-start md:justify-between mb-4">
                <div>
                  <h3 className="text-2xl font-bold text-white">Full-Stack Developer</h3>
                  <p className="text-lg text-gray-200">Techlynx Solutions</p>
                </div>
                <div className="text-gray-300 mt-2 md:mt-0">
                  <p>Nairobi, Kenya</p>
                  <p>Jan 2023 – Present</p>
                </div>
              </div>

              <ul className="space-y-3 text-gray-200">
                <li>Design, develop, and maintain full-stack applications for enterprise and startup clients using Python, Django, Node.js, and React</li>
                <li>Led development of a retail POS system for Lydian Enterprise, implementing inventory management, reporting, and multi-user role controls</li>
                <li>Developed AI-powered face recognition and OSINT tool, improving identity verification and cybersecurity testing for internal lab projects</li>
                <li>Built scalable REST APIs to support mobile and web platforms, optimizing performance and security</li>
                <li>Collaborated with cross-functional teams to gather requirements, improve UI/UX, and ensure client satisfaction</li>
              </ul>
            </div>
          </div>
        </section>

        <section id="projects" className="py-20 px-4">
          <div className="max-w-6xl mx-auto">
            <h2 className="text-3xl md:text-4xl font-bold mb-8 text-center text-white">Featured Projects</h2>
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
              {projects.map((project, idx) => (
                <div key={idx} className="bg-white/4 rounded-xl p-6 border border-white/8 hover:scale-105 transform transition-shadow duration-300 shadow-lg backdrop-blur-md">
                  <h3 className="text-xl font-bold mb-2 text-white">{project.title}</h3>
                  <p className="text-sm text-gray-300 mb-2">{project.tech}</p>
                  <p className="text-gray-200 mb-3">{project.description}</p>
                  <ul className="space-y-1 text-gray-300">
                    {project.features.map((f, i) => <li key={i}>• {f}</li>)}
                  </ul>
                </div>
              ))}
            </div>
          </div>
        </section>

        <section id="education" className="py-20 px-4">
          <div className="max-w-4xl mx-auto">
            <h2 className="text-3xl md:text-4xl font-bold mb-6 text-center text-white">Education</h2>
            <div className="mx-auto backdrop-blur-xl bg-white/6 rounded-xl p-8 border border-white/8 shadow-2xl">
              <h3 className="text-2xl font-bold text-white mb-2">B.Sc. in Information Technology</h3>
              <p className="text-lg text-gray-200 mb-4">Kirinyaga University (Ongoing)</p>
              <div className="flex flex-wrap gap-2">
                {['Database Management', 'Data Structures & Algorithms', 'Probability & Statistics', 'Software Development', 'Cybersecurity'].map(course => (
                  <span key={course} className="px-3 py-1 bg-white/6 rounded-full text-sm text-gray-200 border border-white/6">{course}</span>
                ))}
              </div>
            </div>
          </div>
        </section>

        <section id="contact" className="py-20 px-4">
          <div className="max-w-4xl mx-auto text-center">
            <h2 className="text-3xl md:text-4xl font-bold mb-6 text-white">Get In Touch</h2>
            <p className="text-lg text-gray-200 mb-6">I'm currently open to new opportunities, collaborations, and freelance projects. Feel free to reach out!</p>
            <div className="flex flex-wrap justify-center gap-6 mb-8">
              <a href="mailto:mainajackson3560@gmail.com" className="flex items-center gap-2 px-6 py-3 bg-white text-black hover:bg-gray-200 rounded-lg transition-all duration-200 font-semibold"> <Mail size={18} /> mainajackson3560@gmail.com</a>
              <a href="https://github.com/jackson254365" target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 px-6 py-3 bg-white/6 rounded-lg border border-white/8 backdrop-blur-sm"> <Github size={18} /> GitHub</a>
              <a href="https://linkedin.com/in/jackson-maina-0731022b4" target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 px-6 py-3 bg-white/6 rounded-lg border border-white/8 backdrop-blur-sm"> <Linkedin size={18} /> LinkedIn</a>
            </div>
          </div>
        </section>

        <footer className="py-8 px-4">
          <div className="max-w-4xl mx-auto text-center text-gray-300">
            <p>© 2025 Jackson Maina. Built with React & Tailwind CSS.</p>
          </div>
        </footer>
      </div>

      {/* Inline styles for blob & float animations */}
      <style>{`
        @keyframes blob {
          0% { transform: translateY(0px) scale(1); }
          33% { transform: translateY(-20px) scale(1.05); }
          66% { transform: translateY(10px) scale(0.95); }
          100% { transform: translateY(0px) scale(1); }
        }
        .animate-blob { animation: blob 12s infinite ease-in-out; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }

        @keyframes float {
          0% { transform: translateY(0px); }
          50% { transform: translateY(-12px); }
          100% { transform: translateY(0px); }
        }
        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-float-slow { animation: float 9s ease-in-out infinite; }
        .animate-float-reverse { animation: float 7s ease-in-out infinite reverse; }

        /* small helper for subtle fade-in used earlier */
        .animate-fade-in { animation: fadeIn 1.2s ease both; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }

      `}</style>
    </div>
  );
}

